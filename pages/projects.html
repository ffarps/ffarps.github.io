<!DOCTYPE html>
<html lang="en-GB" id="html-root">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>All Projects</title>
    <link rel="stylesheet" href="/styles/styles.css" />
    <style>
        body {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem 4rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            margin-bottom: 1.5rem;
            color: var(--font-color);
            text-decoration: none;
            border: 1px solid var(--accent-color);
            padding: 0.5rem 0.9rem;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }

        .back-link:hover,
        .back-link:focus-visible {
            background: var(--accent-color);
            color: var(--back-accent-color);
            border-color: transparent;
        }

        .page-header {
            margin-bottom: 2.5rem;
        }

        .page-header h1 {
            margin-bottom: 0.75rem;
        }

        .page-header p {
            max-width: 60ch;
            line-height: 1.6;
        }

        .projects-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 1.25rem;
            align-items: flex-end;
            margin-bottom: 2rem;
        }

        .toolbar-field {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            min-width: 220px;
            flex: 1 1 280px;
        }

        .toolbar-field label {
            font-size: 0.95rem;
            font-weight: 600;
            opacity: 0.8;
        }

        .search-input {
            width: 100%;
            padding: 0.65rem 0.95rem;
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            background: var(--back-accent-color);
            color: var(--font-color);
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .search-input:focus-visible {
            outline: 2px solid var(--font-color);
            outline-offset: 2px;
        }

        .sort-select {
            width: 100%;
            padding: 0.65rem 0.95rem;
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            background: var(--back-accent-color);
            color: var(--font-color);
            font-size: 1rem;
            appearance: none;
        }

        .chips-container {
            flex: 100%;
            display: flex;
            flex-direction: column;
            gap: 0.65rem;
        }

        .chip-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag-chip {
            border: 1px solid var(--accent-color);
            border-radius: 999px;
            padding: 0.35rem 0.75rem;
            font-size: 0.85rem;
            font-weight: 600;
            background: transparent;
            color: var(--font-color);
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }

        .tag-chip[aria-pressed="true"] {
            background: var(--accent-color);
            color: var(--back-accent-color);
            border-color: transparent;
        }

        .tag-chip:focus-visible {
            outline: 2px solid var(--font-color);
            outline-offset: 2px;
        }

        .toolbar-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .toolbar-actions button {
            padding: 0.6rem 1rem;
            border-radius: 6px;
            border: 1px solid var(--accent-color);
            background: transparent;
            color: var(--font-color);
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }

        .toolbar-actions button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .toolbar-actions button:not(:disabled):hover,
        .toolbar-actions button:not(:disabled):focus-visible {
            background: var(--accent-color);
            color: var(--back-accent-color);
        }

        .results-summary {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .results-summary strong {
            font-size: 1.05rem;
        }

        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 4rem;
        }

        .project-card {
            background: var(--back-accent-color);
            border: 2px solid var(--accent-color);
            border-radius: 14px;
            padding: 1.4rem;
            display: flex;
            flex-direction: column;
            gap: 0.85rem;
        }

        .project-card:focus-within {
            outline: 2px solid var(--font-color);
            outline-offset: 4px;
        }

        .project-card h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .project-card p {
            margin: 0;
            opacity: 0.85;
            line-height: 1.6;
        }

        .project-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.85rem;
            opacity: 0.7;
        }

        .project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.45rem;
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .project-tags li {
            border-radius: 999px;
            padding: 0.25rem 0.65rem;
            font-size: 0.75rem;
            font-weight: 600;
            border: 1px solid currentColor;
        }

        .project-link {
            align-self: flex-start;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.55rem 0.9rem;
            border-radius: 6px;
            border: 1px solid var(--accent-color);
            color: var(--font-color);
            font-weight: 600;
            text-decoration: none;
            transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }

        .project-link:hover,
        .project-link:focus-visible {
            background: var(--font-color);
            color: var(--back-accent-color);
            border-color: transparent;
        }

        .empty-state {
            padding: 2.5rem;
            border-radius: 16px;
            border: 2px dashed var(--accent-color);
            text-align: center;
            font-style: italic;
            opacity: 0.8;
        }

        @media (max-width: 720px) {
            body {
                padding: 1.5rem 1rem 3rem;
            }

            .projects-toolbar {
                gap: 1rem;
            }

            .toolbar-field {
                flex: 1 1 100%;
            }

            .results-summary {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        .footer {
            max-width: none !important;
            width: 100vw !important;
            margin-left: calc(-50vw + 50%) !important;
            margin-top: 3rem;
        }
    </style>
</head>

<body>
    <a href="/" class="back-link" aria-label="Back to home">
        <span aria-hidden="true">&larr;</span>
        Back to Home
    </a>

    <header class="page-header">
        <h1>All Projects</h1>
        <p>Browse Francisco Pereira&rsquo;s full portfolio. Use the search bar and tag filters to quickly surface work
            by technology, industry, or platform.</p>
    </header>

    <section aria-labelledby="projects-title">
        <h2 id="projects-title" class="sr-only">Projects catalogue</h2>

        <div class="projects-toolbar">
            <div class="toolbar-field">
                <label for="search-input">Search</label>
                <input id="search-input" class="search-input" type="search" placeholder="Search projects or tags"
                    autocomplete="off" />
            </div>

            <div class="toolbar-field">
                <label for="sort-select">Sort by</label>
                <select id="sort-select" class="sort-select">
                    <option value="featured">Featured order</option>
                    <option value="newest">Newest first</option>
                    <option value="title-asc">Title A &rarr; Z</option>
                </select>
            </div>

            <div class="chips-container">
                <span class="tag-label" id="tag-filter-label">Filter by tag</span>
                <div class="chip-row" id="tag-chip-row" role="group" aria-labelledby="tag-filter-label"></div>
            </div>

            <div class="toolbar-actions">
                <button type="button" id="clear-filters" disabled>Clear filters</button>
            </div>
        </div>

        <div class="results-summary" aria-live="polite" aria-atomic="true">
            <strong id="results-count"></strong>
            <span id="results-active-filters"></span>
        </div>

        <div id="projects-grid" class="project-grid" role="list"></div>
    </section>

    <footer class="footer">
        <div class="footer-main central-footer-content">
            <div class="footer-row">
                <div class="footer-links">
                    <a href="/" class="footer-link">Home</a>
                    <a href="/pages/projects.html" class="footer-link" aria-current="page">Projects</a>
                    <a href="/#contact-section" class="footer-link">Contact Me</a>
                    <a href="/pages/privacy.html" class="footer-link">Privacy</a>
                </div>
                <div class="footer-social">
                    <a class="primary" href="https://github.com/ffarps" title="GitHub" target="_blank"
                        rel="noopener noreferrer">
                        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <path
                                d="M12 .5C5.73.5.5 5.74.5 12.02c0 5.11 3.29 9.45 7.86 10.98.58.11.79-.25.79-.56 0-.28-.01-1.02-.01-2-3.2.7-3.88-1.54-3.88-1.54-.53-1.34-1.3-1.7-1.3-1.7-1.07-.74.08-.73.08-.73 1.18.08 1.8 1.22 1.8 1.22 1.05 1.8 2.75 1.28 3.43.98.11-.77.41-1.28.74-1.58-2.55-.29-5.23-1.28-5.23-5.7 0-1.26.45-2.29 1.2-3.1-.12-.3-.52-1.51.11-3.16 0 0 .97-.31 3.18 1.19a11.1 11.1 0 0 1 2.9-.39c.98 0 1.97.13 2.9.39 2.2-1.5 3.17-1.19 3.17-1.19.63 1.65.23 2.86.11 3.16.75.81 1.2 1.84 1.2 3.1 0 4.43-2.68 5.41-5.24 5.69.43.37.81 1.11.81 2.24 0 1.62-.01 2.93-.01 3.33 0 .31.21.67.8.56A11.53 11.53 0 0 0 23.5 12.02C23.5 5.74 18.27.5 12 .5z">
                            </path>
                        </svg>
                    </a>
                    <a class="primary linkedin-icon" href="https://www.linkedin.com/in/francisco-pereira-9755501a3/"
                        title="LinkedIn" target="_blank" rel="noopener noreferrer">
                        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <path
                                d="M20.447 20.452h-3.554v-5.569c0-1.327-.024-3.037-1.849-3.037-1.851 0-2.132 1.445-2.132 2.939v5.667h-3.554V9h3.414v1.561h.049c.476-.899 1.637-1.849 3.369-1.849 3.602 0 4.267 2.369 4.267 5.455v6.285zM5.337 7.433c-1.144 0-2.069-.926-2.069-2.069 0-1.143.925-2.069 2.069-2.069s2.069.926 2.069 2.069c0 1.143-.925 2.069-2.069 2.069zm1.777 13.019H3.56V9h3.554v11.452zM22.225 0H1.771C.792 0 0 .771 0 1.723v20.549C0 23.229.792 24 1.771 24h20.451C23.2 24 24 23.229 24 22.271V1.723C24 .771 23.2 0 22.222 0z">
                            </path>
                        </svg>
                    </a>
                </div>
                <div class="footer-switchers">
                    <div id="lang-switcher" class="lang-switcher lang-switcher-footer stylish-lang-switcher">
                        <button class="lang-btn" data-lang="en-GB" aria-label="English" title="English" tabindex="0">
                            <span class="lang-flag-wrap"><img src="/images/gb.svg" alt="English" height="22"
                                    width="32" /></span>
                            <span class="lang-label">EN</span>
                        </button>
                        <button class="lang-btn" data-lang="pt-PT" aria-label="Português" title="Português"
                            tabindex="0">
                            <span class="lang-flag-wrap"><img src="/images/pt.svg" alt="Português" height="22"
                                    width="32" /></span>
                            <span class="lang-label">PT</span>
                        </button>
                    </div>
                    <div id="theme-switcher" class="theme-switcher">
                        <button class="theme-btn" data-theme="system" aria-label="System Default"
                            title="System Default">System</button>
                        <button class="theme-btn" data-theme="dark" aria-label="Dark Mode"
                            title="Dark Mode">Dark</button>
                        <button class="theme-btn" data-theme="light" aria-label="Light Mode"
                            title="Light Mode">Light</button>
                    </div>
                </div>
            </div>
            <span class="footeropyright">&copy; 2023-2025 Francisco Pereira</span>
        </div>
    </footer>

    <script>
        window.addEventListener("DOMContentLoaded", () => {
            const projects = [
                {
                    id: "holoassembly",
                    title: "HoloAssembly",
                    description: "AR/VR simulator that guides technicians through complex assembly workflows.",
                    link: "https://github.com/ffarps/holoassembly",
                    tags: ["Simulation", "Tools", "XR"],
                    primaryTag: "Simulation",
                    year: 2024,
                    featuredOrder: 1
                },
                {
                    id: "ml-suite",
                    title: "Machine Learning Project",
                    description: "Predictive analytics toolkit delivering explainable AI dashboards for stakeholders.",
                    link: "projects/project-ml.html",
                    tags: ["Machine Learning", "AI"],
                    primaryTag: "Machine Learning",
                    year: 2023,
                    featuredOrder: 2
                },
                {
                    id: "fullstack-web",
                    title: "Web Development Project",
                    description: "Full-stack web platform featuring server-rendered pages and granular caching.",
                    link: "projects/project-web.html",
                    tags: ["Web Development", "Frontend"],
                    primaryTag: "Web Development",
                    year: 2022,
                    featuredOrder: 3
                },
                {
                    id: "serverless-api",
                    title: "Backend API Project",
                    description: "Scalable REST API using event-driven microservices and observability tooling.",
                    link: "projects/project-backend.html",
                    tags: ["Backend", "Microservices"],
                    primaryTag: "Backend",
                    year: 2023,
                    featuredOrder: 4
                },
                {
                    id: "hybrid-mobile",
                    title: "Mobile App Project",
                    description: "Cross-platform mobile app with offline-first data sync and adaptive layouts.",
                    link: "projects/project-mobile.html",
                    tags: ["Mobile", "Cross-Platform"],
                    primaryTag: "Mobile",
                    year: 2022,
                    featuredOrder: 5
                },
                {
                    id: "dev-tooling",
                    title: "Developer Tools",
                    description: "CLI and editor integrations that streamline release pipelines and QA automation.",
                    link: "projects/project-tools.html",
                    tags: ["Tools", "Productivity"],
                    primaryTag: "Tools",
                    year: 2021,
                    featuredOrder: 6
                }
            ];

            const state = {
                search: "",
                tags: new Set(),
                sort: "featured"
            };

            const elements = {
                grid: document.getElementById("projects-grid"),
                tagRow: document.getElementById("tag-chip-row"),
                search: document.getElementById("search-input"),
                sort: document.getElementById("sort-select"),
                clear: document.getElementById("clear-filters"),
                resultsCount: document.getElementById("results-count"),
                resultsFilters: document.getElementById("results-active-filters")
            };

            const uniqueTags = Array.from(new Set(projects.flatMap(project => project.tags))).sort((a, b) => a.localeCompare(b));

            function getColorForTag(tag) {
                const accent = getComputedStyle(document.documentElement).getPropertyValue("--accent-color").trim();
                let hash = 0;
                for (let i = 0; i < tag.length; i += 1) {
                    hash = tag.charCodeAt(i) + ((hash << 5) - hash);
                }
                const hue = Math.abs(hash) % 360;
                return accent || `hsl(${hue}, 70%, 55%)`;
            }

            function buildTagFilters() {
                elements.tagRow.innerHTML = "";
                uniqueTags.forEach(tag => {
                    const button = document.createElement("button");
                    button.type = "button";
                    button.className = "tag-chip";
                    button.textContent = tag;
                    button.dataset.tag = tag;
                    button.setAttribute("aria-pressed", state.tags.has(tag) ? "true" : "false");
                    button.addEventListener("click", () => toggleTag(tag));
                    elements.tagRow.appendChild(button);
                });
            }

            function toggleTag(tag) {
                if (state.tags.has(tag)) {
                    state.tags.delete(tag);
                } else {
                    state.tags.add(tag);
                }
                render();
            }

            function handleSearch(event) {
                state.search = event.target.value;
                render();
            }

            function handleSort(event) {
                state.sort = event.target.value;
                render();
            }

            function clearFilters() {
                state.search = "";
                state.tags.clear();
                state.sort = "featured";
                render();
            }

            function getFilteredProjects() {
                const query = state.search.trim().toLowerCase();
                const activeTags = Array.from(state.tags);

                return projects
                    .filter(project => {
                        const matchesSearch = query.length === 0
                            || project.title.toLowerCase().includes(query)
                            || project.description.toLowerCase().includes(query)
                            || project.tags.some(tag => tag.toLowerCase().includes(query));

                        const matchesTags = activeTags.length === 0
                            ? true
                            : activeTags.every(tag => project.tags.includes(tag));

                        return matchesSearch && matchesTags;
                    })
                    .sort((a, b) => {
                        if (state.sort === "newest") {
                            return b.year - a.year;
                        }
                        if (state.sort === "title-asc") {
                            return a.title.localeCompare(b.title);
                        }
                        return a.featuredOrder - b.featuredOrder;
                    });
            }

            function renderProjects() {
                const filtered = getFilteredProjects();
                elements.grid.innerHTML = "";

                if (filtered.length === 0) {
                    const empty = document.createElement("div");
                    empty.className = "empty-state";
                    empty.textContent = "No projects match the current filters. Clear the filters or try a different keyword.";
                    elements.grid.appendChild(empty);
                    return;
                }

                filtered.forEach(project => {
                    const card = document.createElement("article");
                    card.className = "project-card";
                    card.setAttribute("role", "listitem");

                    const title = document.createElement("h3");
                    title.textContent = project.title;

                    const description = document.createElement("p");
                    description.textContent = project.description;

                    const meta = document.createElement("div");
                    meta.className = "project-meta";
                    meta.innerHTML = `<span>${project.primaryTag}</span><span>${project.year}</span>`;

                    const tagList = document.createElement("ul");
                    tagList.className = "project-tags";
                    project.tags.forEach(tag => {
                        const item = document.createElement("li");
                        item.textContent = tag;
                        item.style.color = getColorForTag(tag);
                        tagList.appendChild(item);
                    });

                    const link = document.createElement("a");
                    link.className = "project-link";
                    link.href = project.link;
                    const isExternal = /^https?:\/\//i.test(project.link);
                    if (isExternal) {
                        link.target = "_blank";
                        link.rel = "noopener noreferrer";
                    }
                    link.innerHTML = `Explore<span aria-hidden="true">→</span>`;

                    card.appendChild(title);
                    card.appendChild(description);
                    card.appendChild(meta);
                    card.appendChild(tagList);
                    card.appendChild(link);
                    elements.grid.appendChild(card);
                });

                updateSummary(filtered.length);
            }

            function updateSummary(visibleCount) {
                const total = projects.length;
                const tagDescription = state.tags.size > 0
                    ? `Filtered by ${Array.from(state.tags).join(", ")}`
                    : "No tag filters applied";

                elements.resultsCount.textContent = `Showing ${visibleCount} of ${total} project${total === 1 ? "" : "s"}`;
                elements.resultsFilters.textContent = state.search
                    ? `Search: “${state.search}”. ${tagDescription}.`
                    : tagDescription;

                elements.clear.disabled = state.tags.size === 0 && state.search.length === 0 && state.sort === "featured";
            }

            function render() {
                elements.search.value = state.search;
                elements.sort.value = state.sort;
                buildTagFilters();
                renderProjects();
            }

            elements.search.addEventListener("input", handleSearch);
            elements.sort.addEventListener("change", handleSort);
            elements.clear.addEventListener("click", clearFilters);

            render();
        });
    </script>
    <script src="/scripts/language.js"></script>
    <script src="/scripts/theme.js"></script>
</body>

</html>